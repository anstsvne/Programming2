<Window x:Class="View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:View.Converter"
        xmlns:controls="clr-namespace:View.Controls"
        Title="Contacts" 
        Height="450" 
        Width="800"
        Icon="/contacts_icon.ico">
    <Window.Resources>
        <conv:BoolToVisibilityConverter 
        x:Key="BoolToVisibilityConverter" />
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*" MinWidth="150"/>
            <ColumnDefinition Width=" 3"/>
            <ColumnDefinition Width="3*" MinWidth="200"/>
        </Grid.ColumnDefinitions>

        <!--Левая панель -->
        <UniformGrid Grid.Column="0" 
              Background="#f8f8f8">
            <Border Padding="8">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Поиск -->
                    <Grid Grid.Row="0"
                          Margin="8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Label Margin="3"
                               VerticalAlignment="Center" 
                               Content="Find:"/>
                        <TextBox Grid.Column="1" 
                                 VerticalAlignment="Center"
                                 Margin="3"/>
                    </Grid>

                    <!-- Список контактов -->
                    <ListBox 
                x:Name="ContactsListBox" 
                Grid.Row="1" 
                Margin="8"
                ItemsSource="{Binding Contacts}"
                SelectedItem="{Binding SelectedContact, Mode=TwoWay}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" Margin="3" VerticalAlignment="Center">
                                    <Image 
                                Width="30" 
                                Height="30" 
                                Source="/photo_placeholder_100x100.png" 
                                Margin="0,0,5,0"
                                />
                                    <StackPanel>
                                        <TextBlock
                                    FontSize="12"
                                    FontWeight="SemiBold"
                                    Text="{Binding Name}"/>
                                        <TextBlock
                                    FontSize="10"
                                    Text="{Binding PhoneNumber}"/>
                                    </StackPanel>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                    

                    <!-- Кнопки -->
                    <UniformGrid Grid.Row="2" 
                          Margin="3"
                          Columns="3">
                        <Button 
                                Margin="2" 
                                Content="Add" 
                                Command="{Binding AddCommand}"/>
                        <Button  
                                Margin="2" 
                                Content="Edit"
                                Command="{Binding EditCommand}"/>
                        <Button 
                                Margin="2"
                                Content="Remove" 
                                Command="{Binding RemoveCommand}"/>
                    </UniformGrid>
                </Grid>
            </Border>
        </UniformGrid>

        <GridSplitter Grid.Column="1" 
                      Width="3"
                      Background="White"/>


        <!-- Правая панель -->
        <StackPanel Grid.Column="2" Margin="20,10,10,10" VerticalAlignment="Top">
            <controls:ContactControl 
        DataContext="{Binding ClonedContact}" 
        IsReadOnly="{Binding DataContext.IsContactReadOnly, RelativeSource={RelativeSource AncestorType=Window}}" 
        VerticalAlignment="Top"/>

            <Button 
        Content="Apply"
        Height="25"
        Width="75"
        Margin="0,10,0,0"
        Command="{Binding ApplyCommand}" 
        HorizontalAlignment="Left" 
        Visibility="{Binding IsDataChanged, Converter={StaticResource BoolToVisibilityConverter}}"
        IsEnabled="{Binding CanApply}"/>
        </StackPanel>

    </Grid>

</Window>
            