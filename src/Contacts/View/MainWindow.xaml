<Window x:Class="View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:View.Converter"
        Title="Contacts" 
        Height="450" 
        Width="800"
        Icon="/contacts_icon.ico">
    <Window.Resources>
        <conv:BoolToVisibilityConverter 
        x:Key="BoolToVisibilityConverter" />
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" MinWidth="200"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="2*" MinWidth="300"/>
        </Grid.ColumnDefinitions>

        <!--Левая панель -->
        <UniformGrid Grid.Column="0" 
              Background="#f8f8f8">
            <Border Padding="8">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Поиск -->
                    <Grid Grid.Row="0"
                          Margin="3">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Label Grid.Column="0"
                               VerticalAlignment="Center" 
                               Content="Find:"/>
                        <TextBox Grid.Column="1" 
                                 Height="20"/>
                    </Grid>

                    <!-- Список контактов -->
                    <ListBox x:Name="ContactsList" 
                             Grid.Row="1" 
                             Margin="3"
                             DisplayMemberPath="Name"
                             ItemsSource="{Binding Contacts}"
                             SelectedItem="{Binding SelectedContact, Mode=TwoWay}"/>

                    <!-- Кнопки -->
                    <UniformGrid Grid.Row="2" 
                          Margin="3"
                          Columns="3">
                        <Button 
                                Margin="2" 
                                Content="Add" 
                                Command="{Binding AddCommand}"/>
                        <Button  
                                Margin="2" 
                                Content="Edit"
                                Command="{Binding EditCommand}"/>
                        <Button 
                                Margin="2"
                                Content="Remove" 
                                Command="{Binding RemoveCommand}"/>
                    </UniformGrid>
                </Grid>
            </Border>
        </UniformGrid>

        <GridSplitter Grid.Column="1" 
                      Width="3"
                      Background="White"/>

        <!-- Правая панель -->
        <Grid Grid.Column="2" Background="White">
            <Border Margin="8">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Row="0" 
                                Grid.Column="1" 
                                Margin="3">
                        <TextBlock Text="Name:"/>
                        <TextBox Margin="0 3 0 0"
                                 Text="{Binding ClonedContact.Name, UpdateSourceTrigger=PropertyChanged}" IsReadOnly="{Binding IsContactReadOnly}" />
                    </StackPanel>

                    <StackPanel Grid.Row="1"
                                Grid.Column="1"
                                Margin="3">
                        <TextBlock Text="Phone Number:"/>
                        <TextBox Margin="0 3 0 0"
                                 Text="{Binding ClonedContact.PhoneNumber, UpdateSourceTrigger=PropertyChanged}" IsReadOnly="{Binding IsContactReadOnly}" />
                    </StackPanel>

                    <StackPanel Grid.Row="2" 
                                Grid.Column="1"
                                Margin="3">
                        <TextBlock Text="Email:"/>
                        <TextBox Margin="0 3 0 0"
                                 Text="{Binding ClonedContact.Email, UpdateSourceTrigger=PropertyChanged}" IsReadOnly="{Binding IsContactReadOnly}" />
                    </StackPanel>
                    <Image Grid.Row="0" 
                           Grid.RowSpan="3" 
                           Grid.Column="0"
                           Width="100" 
                           Height="100" 
                           Margin="1 23 7 29"
                           Source="photo_placeholder_100x100.png"/>
                    <Button Grid.Row="3" 
                            Grid.Column="1" 
                            Width="75" 
                            Height="25"
                            Margin="0 50 0 0" 
                            HorizontalAlignment="Left"
                            Visibility="{Binding IsApplyVisible, 
                            Converter={StaticResource BoolToVisibilityConverter}}"
                            Command="{Binding ApplyCommand}"
                            Content="Apply"/>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>